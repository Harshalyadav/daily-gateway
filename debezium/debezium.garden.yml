kind: Module
type: container
name: gateway-debezium
image: debezium/server:${var.debezium-tag}
services:
  - name: gateway-debezium
    volumes:
      - name: data
        containerPath: /debezium/data
      - name: conf
        containerPath: /debezium/conf
        hostPath: ./conf
    ports:
      - name: http
        containerPort: 8080
        servicePort: 80
    healthCheck:
      httpGet:
        path: /q/health
        port: http
    env:
      CONFIG_FILE: /conf/config.toml
    dependencies:
      - gateway-pubsub-init
      - mysql
